/*! ng-i18next - 0.3.6 - 2015-02-05 - Copyright (c) 2015 Andre Meyering; Licensed MIT*/angular.module("jm.i18next",["ng","ngSanitize"]),angular.module("jm.i18next").provider("$i18next",function(){"use strict";var n=this,t=null,i={},e=null,o=0;n.options={},n.$get=["$rootScope","$timeout",function(r,a){function u(n){if(window.i18n)window.i18n.init(n,function(n){i={},t=n,r.$$phase||r.$digest(),r.$broadcast("i18nextLanguageChange",window.i18n.lng())});else{if(o++,!(5>o))throw new Error("[ng-i18next] Can't find i18next!");a(function(){u(n)},400)}}function s(n,t){c.debugMsg.push(["i18next options changed:",t,n]),e=n,u(e)}function l(n,o,r){var a=o.lng||"auto";i[a]||(i[a]={}),t?(!i[a][n]||r)&&(i[a][n]=t(n,o)):i[a][n]="defaultLoadingValue"in o?o.defaultLoadingValue:"defaultValue"in o?o.defaultValue:"defaultLoadingValue"in e?e.defaultLoadingValue:n}function c(n,t){var o,r=!!t,a=r&&t.ns,u=e&&e.ns,s=e;return!a&&u&&(s=angular.copy(e),s.ns=s.ns.defaultNs),o=r?angular.extend({},s,t):s,l(n,o,r),o.lng?i[o.lng][n]:i.auto[n]}return c.debugMsg=[],c.options=n.options,n.options!==e&&s(n.options,e),c.reInit=function(){s(e,e)},r.$watch(function(){return c.options},function(n,t){n&&t!==n&&s(n,t)},!0),c}]}),angular.module("jm.i18next").directive("ngI18next",["$i18next","$compile","$parse","$interpolate","$sanitize",function(n,t,i,e,o){"use strict";function r(n){var t={attr:"text"};n=n.split(":");for(var i=0;i<n.length;++i)"i18next"===n[i]?t[n[i]]=!0:t.attr=n[i];return t}function a(n){var t,e={attr:"text"},o="{}";return n=n.trim(),0===n.indexOf("[")&&(t=n.split("]"),e=r(t.shift().substr(1).trim()),n=t.join("]")),e.i18next&&0===n.indexOf("(")&&n.indexOf(")")>=0&&(t=n.split(")"),n=t.pop().trim(),o=t.join(")").substr(1).trim()),{key:n,options:e,i18nOptions:i(o)}}function u(i,r){function u(u){function c(a){a.sprintf&&(a.postProcess="sprintf"),"html"===f.options.attr&&angular.forEach(a,function(n,t){a[t]=o(n)});var u=n(f.key,a);if("html"===f.options.attr)return r.empty().append(u),t(r.contents())(i),void 0;l&&l();var s=r.text.bind(r);"text"!==f.options.attr&&(s=r.attr.bind(r,f.options.attr)),u=e(u),l=i.$watch(u,s),s(u(i))}var f=a(u);s&&s(),l&&l(),s=i.$watch(f.i18nOptions,c,!0),c(f.i18nOptions(i))}var s,l;this.localize=function(n){for(var t=n.split(";"),i=0;i<t.length;++i)n=t[i].trim(),""!==n&&u(n)}}return{restrict:"A",scope:!1,controller:["$scope","$element",u],require:"ngI18next",link:function(n,t,i,o){function r(n){return u=n.replace(/^\s+|\s+$/g,""),""===u?a():(o.localize(u),void 0)}function a(){if(!a.done){var i=e(t.html());n.$watch(i,r),a.done=!0}}var u="";i.$observe("ngI18next",r),n.$on("i18nextLanguageChange",function(){o.localize(u)})}}}]),angular.module("jm.i18next").filter("i18next",["$i18next",function(n){"use strict";function t(t,i){return n(t,i)}return t.$stateful=!0,t}]);