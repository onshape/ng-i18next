/*! @onshape/ng-i18next - 0.3.13 - 2017-11-30 - Copyright (c) 2017 Andre Meyering; Licensed MIT*/angular.module("jm.i18next",["ng"]),angular.module("jm.i18next").provider("$i18next",function(){"use strict";var n=this,t=null,e={},i=null,o=0;n.options={},n.$get=["$rootScope","$timeout",function(r,a){function u(n){if(window.i18next)window.i18next.init(n,function(n,i){e={},t=i,r.$$phase||r.$digest(),r.$broadcast("i18nextLanguageChange",window.i18next.language)});else{if(o++,!(5>o))throw new Error("[ng-i18next] Can't find i18next!");a(function(){u(n)},400)}}function s(n,t){f.debugMsg.push(["i18next options changed:",t,n]),i=n,u(i)}function l(n,o,r){var a=o.lng||"auto";e[a]||(e[a]={}),t?(!e[a][n]||r)&&(e[a][n]=t(n,o)):e[a][n]="defaultLoadingValue"in o?o.defaultLoadingValue:"defaultValue"in o?o.defaultValue:"defaultLoadingValue"in i?i.defaultLoadingValue:n}function f(n,t){var o,r=!!t,a=r&&t.ns,u=i&&i.ns,s=i;!a&&u&&(s=angular.copy(i),s.ns=s.ns.defaultNs),o=r?angular.extend({},s,t):s,l(n,o,r);for(var f=e[o.lng]?e[o.lng][n]:n,c=o.nsseparator,g=c.length,d=c,p=i.ns.namespaces,x=0;x<p.length;x++)d=p[x]+c,g=d.length,f&&f.indexOf(d)>-1&&(f=f.substr(f.indexOf(d)+g));return o.lng?f:e.auto[n]}return f.debugMsg=[],f.options=n.options,n.options!==i&&s(n.options,i),f.reInit=function(){s(i,i)},r.$watch(function(){return f.options},function(n,t){n&&t!==n&&s(n,t)},!0),f}]}),angular.module("jm.i18next").directive("ngI18next",["$i18next","$compile","$parse","$interpolate",function(n,t,e,i){"use strict";function o(n){var t={attr:"text"};n=n.split(":");for(var e=0;e<n.length;++e)"i18next"===n[e]?t[n[e]]=!0:t.attr=n[e];return t}function r(n){var t,i={attr:"text"},r="{}";return n=n.trim(),0===n.indexOf("[")&&(t=n.split("]"),i=o(t.shift().substr(1).trim()),n=t.join("]")),i.i18next&&0===n.indexOf("(")&&n.indexOf(")")>=0&&(t=n.split(")"),n=t.pop().trim(),r=t.join(")").substr(1).trim()),{key:n,options:i,i18nOptions:e(r)}}function a(e,o){function a(a){function l(r){r.sprintf&&(r.postProcess="sprintf");var a=n(f.key,r);if("html"===f.options.attr)return o.empty().append(a),t(o.contents())(e),void 0;s&&s();var u=o.text.bind(o);"text"!==f.options.attr&&(u=o.attr.bind(o,f.options.attr)),a=i(a),s=e.$watch(a,u),u(a(e))}var f=r(a);u&&u(),s&&s(),u=e.$watch(f.i18nOptions,l,!0),l(f.i18nOptions(e))}var u,s;this.localize=function(n){for(var t=n.split(";"),e=0;e<t.length;++e)n=t[e].trim(),""!==n&&a(n)}}return{restrict:"A",scope:!1,controller:["$scope","$element",a],require:"ngI18next",link:function(n,t,e,o){function r(n){return u=n.replace(/^\s+|\s+$/g,""),""===u?a():(o.localize(u),void 0)}function a(){if(!a.done){var e=i(t.html());n.$watch(e,r),a.done=!0}}var u="";e.$observe("ngI18next",r),n.$on("i18nextLanguageChange",function(){o.localize(u)})}}}]),angular.module("jm.i18next").filter("i18next",["$i18next",function(n){"use strict";function t(t,e){return n(t,e)}return t.$stateful=!0,t}]);